{% extends 'base.html.twig' %}

{% block title %}Statistiques{% endblock %}

{% block body %}
<h1 class="text-3xl font-semibold text-gray-900 mb-6">Statistiques</h1>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
  <div class="bg-white shadow rounded-lg p-6 text-center">
    <h2 class="text-xl font-bold text-gray-800">Saisie écritures</h2>
    <p class="text-3xl text-indigo-600 font-semibold mt-2">264</p>
  </div>
  <div class="bg-white shadow rounded-lg p-6 text-center">
    <h2 class="text-xl font-bold text-gray-800">Devis</h2>
    <p class="text-3xl text-indigo-600 font-semibold mt-2">40</p>
  </div>
  <div class="bg-white shadow rounded-lg p-6 text-center">
    <h2 class="text-xl font-bold text-gray-800">Relance automatique</h2>
    <p class="text-3xl text-indigo-600 font-semibold mt-2">97</p>
  </div>
  <div class="bg-white shadow rounded-lg p-6 text-center">
    <h2 class="text-xl font-bold text-gray-800">Alertes Trésorerie</h2>
    <p class="text-3xl text-indigo-600 font-semibold mt-2">80</p>
  </div>
  <div class="bg-white shadow rounded-lg p-6 text-center">
    <h2 class="text-xl font-bold text-gray-800">Bilan automatique</h2>
    <p class="text-3xl text-indigo-600 font-semibold mt-2">48</p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-doughnutlabel-rebourne"></script>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">

  <div class="bg-white shadow rounded-lg p-6">
    <h3 class="text-lg font-semibold text-gray-700 mb-4">Répartition des Dépenses (1)</h3>

    <canvas id="DonutDepense" width="380" height="180"></canvas>

    <script>
      const ctx1 = document.getElementById('DonutDepense').getContext('2d');

      const donutData1 = {
        labels: ['January', 'February', 'March', 'April', 'May'],
        datasets: [{
          data: [50, 60, 70, 180, 190],
          backgroundColor: ['#3490dc', '#6574cd', '#38c172', '#f6993f', '#e3342f']
        }],
      };

      const donutOptions1 = {
        plugins: {
          datalabels: {
            color: '#000',
            anchor: 'center',
            font: { weight: 'bold' }
          },
          doughnutlabel: {
            labels: [
              { text: '550', font: { size: 20, weight: 'bold' } },
              { text: 'total' }
            ]
          }
        }
      };

      new Chart(ctx1, {
        type: 'doughnut',
        data: donutData1,
        options: donutOptions1
      });
    </script>
  </div>

  <div class="bg-white shadow rounded-lg p-6">
    <h3 class="text-lg font-semibold text-gray-700 mb-4">Répartition des Dépenses (2)</h3>

    <canvas id="DonutChart" width="380" height="180"></canvas>

    <script>
      const ctx2 = document.getElementById('DonutChart').getContext('2d');

      const donutData2 = {
        labels: ['Marketing', 'Abonnement', 'Billeterie', 'Impôts', 'Salaires'],
        datasets: [{
          data: [50, 60, 70, 180, 190],
          backgroundColor: ['#3490dc', '#6574cd', '#38c172', '#f6993f', '#e3342f']
        }],
      };

      const donutOptions2 = {
        plugins: {
          datalabels: {
            color: '#000',
            anchor: 'center',
            font: { weight: 'bold' }
          },
          doughnutlabel: {
            labels: [
              { text: '550', font: { size: 20, weight: 'bold' } },
              { text: 'total' }
            ]
          }
        }
      };

      new Chart(ctx2, {
        type: 'doughnut',
        data: donutData2,
        options: donutOptions2
      });
    </script>
  </div>

</div>

{% endblock %}
