  
<head>
    <meta charset="UTF-8">
    <title>FinanceManagementPro - Connexion</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<div class="min-h-screen flex items-center justify-center bg-gray-100">

    <div class="bg-white border border-gray-200 rounded-xl shadow-sm w-full max-w-3xl p-10">

        <form method="post" class="space-y-8">

            <!-- Email -->
            <div>
                <label class="block text-gray-900 font-medium mb-2" for="username">Email</label>
                <input type="email"
                       id="username"
                       name="_username"
                       value="{{ last_username }}"
                       required
                       class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-gray-300"
                       placeholder="Entrée votre adresse email"
                       autocomplete="email">
            </div>

            <!-- Mot de passe -->
            <div>
                <label class="block text-gray-900 font-medium mb-2" for="password">Mot de passe</label>
                <input type="password"
                       id="password"
                       name="_password"
                       required
                       class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-gray-300"
                       placeholder="************"
                       autocomplete="current-password">
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <!-- Bouton -->
            <button type="submit"
                    class="w-full bg-black text-white py-3 rounded-lg hover:bg-gray-900 transition text-center">
                Se connecter
            </button>

        </form>
    </div>

    
{% if show_2fa is defined and show_2fa %}
<div id="modal-2fa"
     class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-8 rounded-xl shadow-xl w-full max-w-md">

        <h2 class="text-2xl font-bold mb-6 text-center">Vérification en deux étapes</h2>

        {% if show_qr %}
            <div class="mb-6 text-center">
                <p class="mb-2 font-medium">Scannez ce QR code avec Google Authenticator :</p>
                <img src="{{ qr_code }}" alt="QR Code 2FA" class="mx-auto rounded-md border p-2 bg-gray-50">
            </div>
        {% endif %}

        <form action="{{ path('2fa_login_check') }}" method="post" class="space-y-4">
            <label for="auth_code" class="block text-gray-900 font-medium">Code Google Authenticator</label>
            <input type="text"
                   id="auth_code"
                   name="_auth_code"
                   required
                   class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-gray-300">
            <button type="submit"
                    class="w-full bg-black text-white py-3 rounded-lg hover:bg-gray-900 transition">
                Valider
            </button>
        </form>
    </div>
</div>
{% endif %}
</div>
